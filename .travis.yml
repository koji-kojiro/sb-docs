language: common-lisp
sudo: false

env:
  global:
    - PATH: ~/.roswell/bin:$PATH
    - ROSWELL_INSTALL_DIR: $HOME/.roswell
    - GIT_COMITTER_NAME: "Kojiro TANI"
    - GIT_COMMITTER_EMAIL: kojiro0531@gmail.com
    - GIT_AUTHOR_NAME: "Kojiro TANI"
    - GIT_AUTHOR_EMAIL: kojir0531@gmail.com

os:
  - linux
  
install:
  - curl -L https://raw.githubusercontent.com/roswell/roswell/release/scripts/install-for-ci.sh | sh
  - ros install koji-kojiro/sb-docs
  - ros install sbcl
  - openssl aes-256-cbc -K $encrypted_ccf13e78b2dd_key -iv $encrypted_ccf13e78b2dd_iv -in .travis.enc -out .travis -d
  - cp .travis ~/.ssh/id_rsa
  - chmod 600 ~/.ssh/id_rsa 

script:
  - make clean build

after_success:
  - git add docs/
  - git commit -a -m "Updated by travis"
  - git push -f git@github.com:koji-kojiro/sb-docs master
